{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nasync function getImagesByQuery(query, page) {\n  let response = await axios.get(\n    `https://pixabay.com/api/?key=49659648-1ebf0f70bcfba68f8c305ff0f&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n  );\n  try {\n    if (response.data.hits.length == 0) {\n      iziToast.error({\n        title: '',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    } else {\n      return [response.data.hits, response.data.totalHits];\n    }\n  } catch (error) {\n    return error;\n  }\n}\n\nexport default getImagesByQuery;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst ul = document.querySelector('.gallery');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfunction createGallery(images) {\n  let markup = '';\n\n  images.forEach(image => {\n    markup += `\n    <li>\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"\" />\n        <table>\n          <thead>\n            <tr class=\"th\">\n              <th>Likes</th>\n              <th>Views</th>\n              <th>Comments</th>\n              <th>Downloads</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>${image.likes}</td>\n              <td>${image.views}</td>\n              <td>${image.comments}</td>\n              <td>${image.downloads}</td>\n            </tr>\n          </tbody>\n        </table>\n      </a>\n    </li>\n  `;\n  });\n\n  ul.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\nexport default createGallery;\n\nconst loader = document.querySelector('#loader');\nfunction showLoader() {\n  loader.classList = '';\n}\nfunction hideLoader() {\n  loader.classList = 'hide';\n}\nfunction clearGallery() {\n  ul.innerHTML = '';\n}\n\nconst moreButton = document.querySelector('#more');\n\nfunction showLoadMoreButton() {\n  moreButton.classList = '';\n}\nfunction hideLoadMoreButton() {\n  moreButton.classList = 'hide';\n}\nexport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  moreButton,\n};\n","import getImagesByQuery from './js/pixabay-api';\nimport createGallery from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  moreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\n\nfunction create(userWrited, page) {\n  getImagesByQuery(userWrited, page)\n    .then(images => {\n      console.log(images);\n      createGallery(images[0]);\n      showLoadMoreButton();\n      let totalPages = Math.ceil(images[1] / 15);\n      if (page > totalPages) {\n        hideLoadMoreButton();\n        return iziToast.error({\n          position: 'bottomRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .catch(error => {\n      hideLoadMoreButton();\n      return error;\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  clearGallery();\n  let userWrited = e.target.elements['search-text'];\n  if (userWrited.value.trim()) {\n    showLoader();\n    let page = 1;\n    let query = userWrited.value;\n    moreButton.addEventListener('click', e => {\n      page++;\n      create(query, page);\n      let elem = document.querySelector('li:last-child');\n\n      let rect = elem.getBoundingClientRect();\n      window.scrollBy(0, rect.height);\n    });\n    create(query, page);\n    userWrited.value = '';\n  }\n});\n"],"names":["getImagesByQuery","query","page","response","axios","iziToast","error","ul","gallery","SimpleLightbox","createGallery","images","markup","image","loader","showLoader","hideLoader","clearGallery","moreButton","showLoadMoreButton","hideLoadMoreButton","form","create","userWrited","totalPages","e","rect"],"mappings":"owBAIA,eAAeA,EAAiBC,EAAOC,EAAM,CAC3C,IAAIC,EAAW,MAAMC,EAAM,IACzB,qEAAqEH,CAAK,6EAA6EC,CAAI,EAC/J,EACE,GAAI,CACF,GAAIC,EAAS,KAAK,KAAK,QAAU,EAC/BE,EAAS,MAAM,CACb,MAAO,GACP,QAAS,2EACT,SAAU,UAClB,CAAO,MAED,OAAO,CAACF,EAAS,KAAK,KAAMA,EAAS,KAAK,SAAS,CAEtD,OAAQG,EAAO,CACd,OAAOA,CACR,CACH,CCnBA,MAAMC,EAAK,SAAS,cAAc,UAAU,EAE5C,IAAIC,EAAU,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EACD,SAASC,EAAcC,EAAQ,CAC7B,IAAIC,EAAS,GAEbD,EAAO,QAAQE,GAAS,CACtBD,GAAU;AAAA;AAAA,iBAEGC,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAYtCA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,oBACXA,EAAM,QAAQ;AAAA,oBACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOnC,CAAG,EAEDN,EAAG,mBAAmB,YAAaK,CAAM,EACzCJ,EAAQ,QAAO,CACjB,CAGA,MAAMM,EAAS,SAAS,cAAc,SAAS,EAC/C,SAASC,GAAa,CACpBD,EAAO,UAAY,EACrB,CACA,SAASE,GAAa,CACpBF,EAAO,UAAY,MACrB,CACA,SAASG,GAAe,CACtBV,EAAG,UAAY,EACjB,CAEA,MAAMW,EAAa,SAAS,cAAc,OAAO,EAEjD,SAASC,GAAqB,CAC5BD,EAAW,UAAY,EACzB,CACA,SAASE,GAAqB,CAC5BF,EAAW,UAAY,MACzB,CC/CA,MAAMG,EAAO,SAAS,cAAc,OAAO,EAE3C,SAASC,EAAOC,EAAYrB,EAAM,CAChCF,EAAiBuB,EAAYrB,CAAI,EAC9B,KAAKS,GAAU,CACd,QAAQ,IAAIA,CAAM,EAClBD,EAAcC,EAAO,CAAC,CAAC,EACvBQ,IACA,IAAIK,EAAa,KAAK,KAAKb,EAAO,CAAC,EAAI,EAAE,EACzC,GAAIT,EAAOsB,EACT,OAAAJ,IACOf,EAAS,MAAM,CACpB,SAAU,cACV,QAAS,4DACnB,CAAS,CAET,CAAK,EACA,MAAMC,IACLc,IACOd,EACR,EACA,QAAQ,IAAM,CACbU,GACN,CAAK,CACL,CAEAK,EAAK,iBAAiB,SAAUI,GAAK,CACnCA,EAAE,eAAc,EAChBR,IACA,IAAIM,EAAaE,EAAE,OAAO,SAAS,aAAa,EAChD,GAAIF,EAAW,MAAM,OAAQ,CAC3BR,IACA,IAAIb,EAAO,EACPD,EAAQsB,EAAW,MACvBL,EAAW,iBAAiB,QAASO,GAAK,CACxCvB,IACAoB,EAAOrB,EAAOC,CAAI,EAGlB,IAAIwB,EAFO,SAAS,cAAc,eAAe,EAEjC,wBAChB,OAAO,SAAS,EAAGA,EAAK,MAAM,CACpC,CAAK,EACDJ,EAAOrB,EAAOC,CAAI,EAClBqB,EAAW,MAAQ,EACpB,CACH,CAAC"}