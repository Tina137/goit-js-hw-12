{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nasync function getImagesByQuery(query, page) {\n  try {\n    let response = await axios.get(\n      `https://pixabay.com/api/?key=49659648-1ebf0f70bcfba68f8c305ff0f&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n    if (response.data.hits.length == 0) {\n      iziToast.error({\n        title: '',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    } else {\n      return [response.data.hits, response.data.totalHits];\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n}\n\nexport default getImagesByQuery;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst ul = document.querySelector('.gallery');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfunction createGallery(images) {\n  let markup = '';\n\n  images.forEach(image => {\n    markup += `\n    <li>\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"\" />\n        <table>\n          <thead>\n            <tr class=\"th\">\n              <th>Likes</th>\n              <th>Views</th>\n              <th>Comments</th>\n              <th>Downloads</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>${image.likes}</td>\n              <td>${image.views}</td>\n              <td>${image.comments}</td>\n              <td>${image.downloads}</td>\n            </tr>\n          </tbody>\n        </table>\n      </a>\n    </li>\n  `;\n  });\n\n  ul.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\nexport default createGallery;\n\nconst loader = document.querySelector('#loader');\nfunction showLoader() {\n  loader.classList = '';\n}\nfunction hideLoader() {\n  loader.classList = 'hide';\n}\nfunction clearGallery() {\n  ul.innerHTML = '';\n}\n\nconst moreButton = document.querySelector('#more');\n\nfunction showLoadMoreButton() {\n  moreButton.classList = '';\n}\nfunction hideLoadMoreButton() {\n  moreButton.classList = 'hide';\n}\nexport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  moreButton,\n};\n","import getImagesByQuery from './js/pixabay-api';\nimport createGallery, {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  moreButton,\n} from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nlet currentPage = 1;\nlet totalPages = 0;\nlet currentQuery = '';\n\nasync function create(userWrited, page) {\n  try {\n    console.log(page);\n    showLoader();\n    const result = await getImagesByQuery(userWrited, page);\n    const [images, totalHits] = result;\n\n    if (images.length === 0) {\n      iziToast.warning({\n        position: 'topRight',\n        message: 'Sorry, no images found. Please try another search.',\n      });\n      return;\n    }\n\n    createGallery(images);\n    totalPages = Math.ceil(totalHits / 15);\n\n    if (page < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      if (page !== 1) {\n        iziToast.info({\n          position: 'bottomRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    }\n  } catch (error) {\n    hideLoadMoreButton();\n    return error;\n  } finally {\n    hideLoader();\n  }\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  clearGallery();\n  hideLoadMoreButton();\n  let userWrited = e.target.elements['search-text'];\n  currentQuery = userWrited.value.trim();\n  if (currentQuery) {\n    currentPage = 1;\n    await create(currentQuery, currentPage);\n    userWrited.value = '';\n  }\n});\n\nmoreButton.addEventListener('click', async () => {\n  if (currentPage < totalPages) {\n    currentPage++;\n    await create(currentQuery, currentPage);\n\n    const elem = document.querySelector('li:last-child');\n    if (elem) {\n      const rect = elem.getBoundingClientRect();\n      window.scrollBy({\n        top: rect.height * 2,\n        behavior: 'smooth',\n      });\n    }\n  }\n});\n"],"names":["getImagesByQuery","query","page","response","axios","iziToast","error","ul","gallery","SimpleLightbox","createGallery","images","markup","image","loader","showLoader","hideLoader","clearGallery","moreButton","showLoadMoreButton","hideLoadMoreButton","form","currentPage","totalPages","currentQuery","create","userWrited","result","totalHits","e","elem","rect"],"mappings":"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"}